/*
 * wavify v0.2.2
 * (c) 2021 Wilson Kabalisa
 * Released under the MIT license
 * https://github.com/wilson-kbs/wavify
 */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).wavify={})}(this,function(t){"use strict";function s(t,i){var e,s=document.createElementNS("http://www.w3.org/2000/svg",t);for(e in i)s.setAttributeNS(null,e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}),i[e].toString());return s}function e(t,i){if("string"==typeof t){var e=document.querySelector(t);if(!e)throw new Error(e+" is not found");this._el=e}else this._el=t;this._options=(null!=(t=i)&&t.position&&(t.position=t.position.toLocaleUpperCase()),Object.assign({},{height:200,amplitude:100,speed:.15,bones:3,position:"BOTTOM",color:"rgba(255,255,255, 0.20)",autostart:!0},t)),i=s("svg",{version:"1.1",height:"100%",width:"100%",fill:"none"}),t=s("path",{fill:this._options.color}),i.appendChild(t),this._el.appendChild(i),this._target=t,this._cache={},this._cache.preFactor=Math.floor(1e3*Math.random()),this._sizeToCache(),this._target.setAttribute("d",this._drawPath(this._drawPoints(this._factor))),this._options.autostart&&this.play(),window.addEventListener("resize",this._resizePath.bind(this))}var i={_factor:{configurable:!0}};i._factor.get=function(){return this._cache.preFactor*Math.PI},e.prototype._sizeToCache=function(){var t=this._el.getBoundingClientRect();this._cache.width=t.width,this._cache.height=t.height},e.prototype._getPathEnd=function(){var t="";switch(this._options.position){case"RIGHT":t+=" L "+this._cache.width+" "+this._cache.height,t+=" L "+this._cache.width+" 0";break;case"LEFT":t+=" L 0 "+this._cache.height,t+=" L 0 0";break;case"TOP":t+=" L "+this._cache.width+" 0",t+=" L 0 0";break;default:t+=" L "+this._cache.width+" "+this._cache.height,t+=" L 0 "+this._cache.height}return t+=" Z"},e.prototype._drawPoints=function(t){var i=[];switch(this._options.position){case"RIGHT":case"LEFT":for(var e=0;e<=this._options.bones;e++){var s=e/this._options.bones*this._cache.height,o=(t+(e+e%this._options.bones))*this._options.speed*100,h=Math.sin(o/100)*("LEFT"===this._options.position?this._options.amplitude:-this._options.amplitude),h=Math.sin(o/100)*h+("LEFT"===this._options.position?this._options.height:this._cache.width-this._options.height);i.push({x:h,y:s})}break;default:for(var n=0;n<=this._options.bones;n++){var a=n/this._options.bones*this._cache.width,c=(t+(n+n%this._options.bones))*this._options.speed*100,r=Math.sin(c/100)*("TOP"===this._options.position?this._options.amplitude:-this._options.amplitude),r=Math.sin(c/100)*r+("TOP"===this._options.position?this._options.height:this._cache.height-this._options.height);i.push({x:a,y:r})}}return i},e.prototype._drawPath=function(t){var i="M "+t[0].x+" "+t[0].y,e={x:0,y:0};switch(this._options.position){case"RIGHT":case"LEFT":e.x=t[1].x-t[0].x+t[0].x+(t[1].x-t[0].x),e.y=(t[1].y-t[0].y)/2;break;default:e.x=(t[1].x-t[0].x)/2,e.y=t[1].y-t[0].y+t[0].y+(t[1].y-t[0].y)}i+="C "+e.x+" "+e.y+" "+e.x+" "+e.y+" "+t[1].x+" "+t[1].y;for(var s=1;s<t.length-1;s++)e.x=t[s].x-e.x+t[s].x,e.y=t[s].y-e.y+t[s].y,i+="C "+e.x+" "+e.y+" "+e.x+" "+e.y+" "+t[s+1].x+" "+t[s+1].y;return i+=this._getPathEnd()},e.prototype._draw=function(){var t,i=window.Date.now();this._cache.lastUpdate?(t=(i-this._cache.lastUpdate)/1e3,this._cache.lastUpdate=i,this._cache.preFactor+=t,this._target.setAttribute("d",this._drawPath(this._drawPoints(this._factor)))):this._cache.lastUpdate=i,this._cache.animationInstance=requestAnimationFrame(this._draw.bind(this))},e.prototype._resizePath=function(){this._sizeToCache()},e.prototype.play=function(){this._cache.animationInstance||(this._cache.animationInstance=requestAnimationFrame(this._draw.bind(this)))},e.prototype.pause=function(){this._cache.animationInstance&&(cancelAnimationFrame(this._cache.animationInstance),delete this._cache.animationInstance)},e.prototype.setOptions=function(t){this._options=Object.assign({},this._options,t),this._options.position=this._options.position.toLocaleUpperCase()},Object.defineProperties(e.prototype,i),t.Wavify=e,t.default=function(t,i){return new e(t,i)},Object.defineProperty(t,"__esModule",{value:!0})});